<table style="padding:2px; margin:2px;"> 
 <tbody> 
  <tr valign="top"> 
   <td style="width:32px;"><img alt="Computer code" src="//upload.wikimedia.org/wikipedia/commons/thumb/7/78/Gnome-settings-accessibility-keyboard.svg/32px-Gnome-settings-accessibility-keyboard.svg.png" title="Computer code" width="32" height="32" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/7/78/Gnome-settings-accessibility-keyboard.svg/48px-Gnome-settings-accessibility-keyboard.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/7/78/Gnome-settings-accessibility-keyboard.svg/64px-Gnome-settings-accessibility-keyboard.svg.png 2x" data-file-width="60" data-file-height="60" /></td> 
   <td style="background-color:#ffeee0; border-left: 4px solid orange; padding-left: 6px; font-family: Monaco, Consolas, 'Courier New', Courier; font-size:1.0em; line-height:1.5 !important;"><span id="code-listing-1"><b>Code listing 10.1: HelloWorld.java</b></span> 
    <div class="mw-highlight mw-content-ltr" dir="ltr"> 
     <pre>
<span class="lineno"> 1 </span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="o">{</span>
<span class="lineno"> 2 </span> <span class="kd">private</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">();</span>
<span class="lineno"> 3 </span>
<span class="lineno"> 4 </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno"> 5 </span>  <span class="k">new</span> <span class="n">HelloWorld</span><span class="o">().</span><span class="na">print</span><span class="o">();</span>
<span class="lineno"> 6 </span> <span class="o">}</span>
<span class="lineno"> 7 </span>
<span class="lineno"> 8 </span> <span class="kd">static</span> <span class="o">{</span>
<span class="lineno"> 9 </span>  <span class="n">System</span><span class="o">.</span><span class="na">loadLibrary</span><span class="o">(</span><span class="s">"HelloWorld"</span><span class="o">);</span>
<span class="lineno">10 </span> <span class="o">}</span>
<span class="lineno">11 </span><span class="o">}</span>
</pre> 
    </div> </td> 
  </tr> 
 </tbody> 
</table> 
<p>HelloWorld.h</p> 
<div class="mw-highlight mw-content-ltr" dir="ltr"> 
 <pre>
<span class="cm">/* DO NOT EDIT THIS FILE - it is machine generated */</span>
<span class="cp">#include &lt;jni.h&gt;</span>
<span class="cm">/* Header for class HelloWorld */</span>

<span class="cp">#ifndef _Included_HelloWorld</span>
<span class="cp">#define _Included_HelloWorld</span>
<span class="cp">#ifdef __cplusplus</span>
<span class="k">extern</span> <span class="s">"C"</span> <span class="p">{</span>
<span class="cp">#endif</span>
<span class="cm">/*</span>
<span class="cm"> * Class:     HelloWorld</span>
<span class="cm"> * Method:    print</span>
<span class="cm"> * Signature: ()V</span>
<span class="cm"> */</span>
<span class="n">JNIEXPORT</span> <span class="kt">void</span> <span class="n">JNICALL</span> <span class="n">Java_HelloWorld_print</span>
  <span class="p">(</span><span class="n">JNIEnv</span> <span class="o">*</span><span class="p">,</span> <span class="n">jobject</span><span class="p">);</span>

<span class="cp">#ifdef __cplusplus</span>
<span class="p">}</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>
</pre> 
</div> 
<p>libHelloWorld.c</p> 
<div class="mw-highlight mw-content-ltr" dir="ltr"> 
 <pre>
 <span class="cp">#include &lt;stdio.h&gt;</span>
 <span class="cp">#include "HelloWorld.h"</span>

 <span class="n">JNIEXPORT</span> <span class="kt">void</span> <span class="n">JNICALL</span>
 <span class="nf">Java_HelloWorld_print</span><span class="p">(</span><span class="n">JNIEnv</span> <span class="o">*</span><span class="n">env</span><span class="p">,</span> <span class="n">jobject</span> <span class="n">obj</span><span class="p">)</span>
 <span class="p">{</span>
     <span class="n">printf</span><span class="p">(</span><span class="s">"Hello World!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
     <span class="k">return</span><span class="p">;</span>
 <span class="p">}</span>
</pre> 
</div> 
<p>make.sh</p> 
<div class="mw-highlight mw-content-ltr" dir="ltr"> 
 <pre>
<span class="c">#!/bin/sh</span>

<span class="c"># openbsd 4.9</span>
<span class="c"># gcc 4.2.1</span>
<span class="c"># openjdk 1.7.0</span>
<span class="nv">JAVA_HOME</span><span class="o">=</span><span class="k">$(</span>readlink -f /usr/bin/javac <span class="p">|</span> sed <span class="s2">"s:bin/javac::"</span><span class="k">)</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$LD_LIBRARY_PATH</span>:.
javac HelloWorld.java
javah HelloWorld
gcc -I<span class="si">${</span><span class="nv">JAVA_HOME</span><span class="si">}</span>/include -shared libHelloWorld.c -o libHelloWorld.so
java HelloWorld
</pre> 
</div> 
<table style="padding:2px; margin:2px;"> 
 <tbody> 
  <tr valign="top"> 
   <td style="width:32px;"><img alt="Computer code" src="//upload.wikimedia.org/wikipedia/commons/thumb/7/78/Gnome-settings-accessibility-keyboard.svg/32px-Gnome-settings-accessibility-keyboard.svg.png" title="Computer code" width="32" height="32" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/7/78/Gnome-settings-accessibility-keyboard.svg/48px-Gnome-settings-accessibility-keyboard.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/7/78/Gnome-settings-accessibility-keyboard.svg/64px-Gnome-settings-accessibility-keyboard.svg.png 2x" data-file-width="60" data-file-height="60" /></td> 
   <td style="background-color:#ffeee0; border-left: 4px solid orange; padding-left: 6px; font-family: Monaco, Consolas, 'Courier New', Courier; font-size:1.0em; line-height:1.5 !important;"><b>Commands to execute on POSIX</b> <pre style="background-color:#000; color:#fff;">
chmod +x make.sh
./make.sh
</pre></td> 
  </tr> 
 </tbody> 
</table>
